@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
  --background: #ffffff;
  --foreground: #171717;
  --header-height: 72px;
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-th, var(--font-en, sans-serif));
  --font-mono: var(--font-en, monospace);
  --step--1: clamp(0.85rem, 0.8rem + 0.25vw, 0.95rem);
  --step-0: clamp(0.95rem, 0.9rem + 0.3vw, 1.1rem);
  --step-1: clamp(1.15rem, 1rem + 0.4vw, 1.35rem);
  --step-2: clamp(1.45rem, 1.2rem + 0.8vw, 1.9rem);
  --step-3: clamp(1.95rem, 1.4rem + 1.4vw, 2.6rem);
  --step-4: clamp(2.6rem, 1.8rem + 2.6vw, 4rem);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-size: var(--step-0);
  line-height: 1.65;
  text-rendering: optimizeLegibility;
}

a {
  color: inherit;
}

p,
li {
  font-size: var(--step-0);
}

small,
.text-xs {
  font-size: var(--step--1);
}

h1,
.text-h1 {
  font-size: var(--step-4);
  line-height: 1.1;
}

h2,
.text-h2 {
  font-size: var(--step-3);
  line-height: 1.2;
}

h3,
.text-h3 {
  font-size: var(--step-2);
  line-height: 1.25;
}

html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

html[dir='rtl'] body {
  text-align: right;
}

html[dir='rtl'] a,
html[dir='rtl'] p,
html[dir='rtl'] h1,
html[dir='rtl'] h2,
html[dir='rtl'] h3 {
  direction: rtl;
}

.text-shadow-white {
  text-shadow: 0 2px 6px rgba(255, 255, 255, 0.5);
}

.no-image-fade {
  animation: none !important;
  transition: none !important;
}

/* Removed legacy navbar rules in favour of Tailwind utilities. */

@layer utilities {
  /* NAVBAR UTILITIES â€” NAMESPACED, SAFE */
  .nv-underline {
    position: relative;
  }
  .nv-underline::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: -1.25rem;
    height: 0.375rem;
    border-top-left-radius: 9999px;
    border-top-right-radius: 9999px;
    background: currentColor;
    transform-origin: left;
    transform: scaleX(0);
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .nv-underline:hover::after,
  .nv-underline:focus-visible::after,
  .nv-underline[aria-current='page']::after,
  .nv-underline[aria-expanded='true']::after {
    transform: scaleX(1);
  }

  .nv-search-collapse {
    overflow: hidden;
    transition: width 0.2s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.15s ease;
  }
  .nv-search-collapse[data-open='false'] {
    width: 0;
    opacity: 0;
    pointer-events: none;
  }
  .nv-search-collapse[data-open='true'] {
    width: 28rem;
    opacity: 1;
  }

  @media (max-width: 1280px) {
    .nv-search-collapse[data-open='true'] {
      width: 22rem;
    }
  }

  @media (max-width: 1100px) {
    .nv-search-collapse[data-open='true'] {
      width: 20rem;
    }
  }

  .nv-mega-enter {
    opacity: 0;
    transform: translateY(0.5rem);
    transition: opacity 0.16s ease, transform 0.16s ease;
  }
  .nv-mega-enter[data-open='true'] {
    opacity: 1;
    transform: translateY(0);
  }

  .nv-lang-menu {
    border-radius: 0.75rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    overflow: hidden;
  }

  .nv-lang-item {
    padding: 0.5rem 0.75rem;
    line-height: 1.2;
  }
  .nv-lang-item:hover {
    background: rgba(0, 0, 0, 0.05);
  }
}
